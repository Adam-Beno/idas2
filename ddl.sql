-- Generated by Oracle SQL Developer Data Modeler 4.1.5.907
--   at:        2017-12-29 15:34:09 CET
--   site:      Oracle Database 12c
--   type:      Oracle Database 12c




DROP TABLE AUTHORS CASCADE CONSTRAINTS ;

DROP TABLE BOOKS CASCADE CONSTRAINTS ;

DROP TABLE CATEGORIES CASCADE CONSTRAINTS ;

DROP TABLE DECORATIONS CASCADE CONSTRAINTS ;

DROP TABLE DECORATION_MOTIVE CASCADE CONSTRAINTS ;

DROP TABLE MOTIVES CASCADE CONSTRAINTS ;

DROP TABLE PAINTERS CASCADE CONSTRAINTS ;

DROP TABLE PLACEMENTS CASCADE CONSTRAINTS ;

DROP TABLE PRINTERS CASCADE CONSTRAINTS ;

DROP TABLE ROLES CASCADE CONSTRAINTS ;

DROP TABLE ROLE_USER CASCADE CONSTRAINTS ;

DROP TABLE SCANS CASCADE CONSTRAINTS ;

DROP TABLE USERS CASCADE CONSTRAINTS ;

CREATE TABLE AUTHORS
  (
    ID NUMBER (11) NOT NULL ,
    NAME NVARCHAR2 (255) NOT NULL ,
    SURNAME NVARCHAR2 (255) NOT NULL ,
    NICKNAME NVARCHAR2 (255) NOT NULL ,
    AGE NUMBER (11) NOT NULL ,
    GENRE NVARCHAR2 (255) NOT NULL
  ) ;
ALTER TABLE AUTHORS ADD CONSTRAINT AUTHOR_PK PRIMARY KEY ( ID ) ;


CREATE TABLE BOOKS
  (
    ID NUMBER (11) NOT NULL ,
    SIGNATURE NVARCHAR2 (255) NOT NULL ,
    BARCODE NUMBER (11) NOT NULL ,
    NAME NVARCHAR2 (255) NOT NULL ,
    NUMBER_OF_PAGES NUMBER (5) NOT NULL ,
    PLACE_OF_ISSUE NVARCHAR2 (255) NOT NULL ,
    YEAR_OF_ISSUE NUMBER (4) ,
    DESCRIPTION CLOB ,
    LANGUAGE NVARCHAR2 (80) NOT NULL ,
    PERIOD_OF_ISSUE NVARCHAR2 (15) ,
    PRINTER_ID NUMBER (11) NOT NULL ,
    AUTHOR_ID  NUMBER (11) NOT NULL
  ) ;
ALTER TABLE BOOKS ADD CONSTRAINT BOOK_PK PRIMARY KEY ( ID ) ;


CREATE TABLE CATEGORIES
  (
    ID NUMBER (11) NOT NULL ,
    NAME NVARCHAR2 (255) NOT NULL ,
    DESCRIPTION CLOB
  ) ;
ALTER TABLE CATEGORIES ADD CONSTRAINT CATEGORY_PK PRIMARY KEY ( ID ) ;


CREATE TABLE DECORATIONS
  (
    ID NUMBER (11) NOT NULL ,
    NAME NVARCHAR2 (255) NOT NULL ,
    WIDTH  NUMBER (11) NOT NULL ,
    HEIGHT NUMBER (11) NOT NULL ,
    NOTE CLOB ,
    BOOK_ID       NUMBER (11) NOT NULL ,
    DECORATION_ID NUMBER (11) NOT NULL ,
    CATEGORY_ID   NUMBER (11) NOT NULL
  ) ;
ALTER TABLE DECORATIONS ADD CONSTRAINT DECORATION_PK PRIMARY KEY ( ID ) ;


CREATE TABLE DECORATION_MOTIVE
  (
    DECORATION_ID NUMBER (11) NOT NULL ,
    MOTIVE_ID     NUMBER (11) NOT NULL
  ) ;
ALTER TABLE DECORATION_MOTIVE ADD CONSTRAINT DECORATION_MOTIVE_PK PRIMARY KEY ( DECORATION_ID, MOTIVE_ID ) ;


CREATE TABLE MOTIVES
  (
    ID NUMBER (11) NOT NULL ,
    NAME NVARCHAR2 (255) NOT NULL ,
    DESCRIPTION CLOB
  ) ;
ALTER TABLE MOTIVES ADD CONSTRAINT MOTIVE_PK PRIMARY KEY ( ID ) ;


CREATE TABLE PAINTERS
  (
    ID NUMBER (11) NOT NULL ,
    NAME NVARCHAR2 (255) NOT NULL ,
    SURNAME NVARCHAR2 (255) NOT NULL ,
    NICKNAME NVARCHAR2 (255) NOT NULL ,
    NOTE CLOB ,
    DECORATION_ID NUMBER (11) NOT NULL
  ) ;
ALTER TABLE PAINTERS ADD CONSTRAINT PAINTER_PK PRIMARY KEY ( ID ) ;


CREATE TABLE PLACEMENTS
  (
    ID          NUMBER (11) NOT NULL ,
    X           NUMBER (11) NOT NULL ,
    Y           NUMBER (11) NOT NULL ,
    PAGE_NUMBER NUMBER (11) NOT NULL ,
    NOTE CLOB ,
    DECORATION_ID NUMBER (11) NOT NULL
  ) ;
ALTER TABLE PLACEMENTS ADD CONSTRAINT PLACEMENT_PK PRIMARY KEY ( ID ) ;


CREATE TABLE PRINTERS
  (
    ID NUMBER (11) NOT NULL ,
    NAME NVARCHAR2 (255) NOT NULL ,
    SURNAME NVARCHAR2 (255) NOT NULL
  ) ;
ALTER TABLE PRINTERS ADD CONSTRAINT PRINTER_PK PRIMARY KEY ( ID ) ;


CREATE TABLE ROLES
  (
    ID NUMBER (11) NOT NULL ,
    NAME NVARCHAR2 (255) NOT NULL ,
    "LEVEL" NUMBER (4) NOT NULL
  ) ;
ALTER TABLE ROLES ADD CONSTRAINT ROLES_PK PRIMARY KEY ( ID ) ;


CREATE TABLE ROLE_USER
  (
    USERS_ID NUMBER (11) NOT NULL ,
    ROLES_ID NUMBER (11) NOT NULL
  ) ;
ALTER TABLE ROLE_USER ADD CONSTRAINT ROLE_USER_PK PRIMARY KEY ( USERS_ID, ROLES_ID ) ;


CREATE TABLE SCANS
  (
    ID NUMBER (11) NOT NULL ,
    NAME NVARCHAR2 (255) NOT NULL ,
    PHOTO BLOB NOT NULL ,
    NOTE CLOB ,
    DECORATION_ID NUMBER (11) NOT NULL ,
    BOOK_ID       NUMBER (11) NOT NULL
  ) ;
ALTER TABLE SCANS ADD CONSTRAINT SCAN_PK PRIMARY KEY ( ID ) ;


CREATE TABLE USERS
  (
    ID NUMBER (11) NOT NULL ,
    FIRST_NAME NVARCHAR2 (255) ,
    LAST_NAME NVARCHAR2 (255) ,
    USERNAME NVARCHAR2 (255) NOT NULL ,
    PASSWORD NVARCHAR2 (255) NOT NULL
  ) ;
ALTER TABLE USERS ADD CONSTRAINT USERS_PK PRIMARY KEY ( ID ) ;


ALTER TABLE BOOKS ADD CONSTRAINT BOOK_AUTHOR_FK FOREIGN KEY ( AUTHOR_ID ) REFERENCES AUTHORS ( ID ) ON
DELETE CASCADE ;

ALTER TABLE BOOKS ADD CONSTRAINT BOOK_PRINTER_FK FOREIGN KEY ( PRINTER_ID ) REFERENCES PRINTERS ( ID ) ON
DELETE CASCADE ;

ALTER TABLE DECORATIONS ADD CONSTRAINT DECORATION_BOOK_FK FOREIGN KEY ( BOOK_ID ) REFERENCES BOOKS ( ID ) ON
DELETE CASCADE ;

ALTER TABLE DECORATIONS ADD CONSTRAINT DECORATION_CATEGORY_FK FOREIGN KEY ( CATEGORY_ID ) REFERENCES CATEGORIES ( ID ) ;

ALTER TABLE DECORATIONS ADD CONSTRAINT DECORATION_DECORATION_FK FOREIGN KEY ( DECORATION_ID ) REFERENCES DECORATIONS ( ID ) ON
DELETE CASCADE ;

ALTER TABLE ROLE_USER ADD CONSTRAINT FK_ASS_1 FOREIGN KEY ( USERS_ID ) REFERENCES USERS ( ID ) ;

ALTER TABLE ROLE_USER ADD CONSTRAINT FK_ASS_2 FOREIGN KEY ( ROLES_ID ) REFERENCES ROLES ( ID ) ;

ALTER TABLE DECORATION_MOTIVE ADD CONSTRAINT FK_ASS_4 FOREIGN KEY ( DECORATION_ID ) REFERENCES DECORATIONS ( ID ) ON
DELETE CASCADE ;

ALTER TABLE DECORATION_MOTIVE ADD CONSTRAINT FK_ASS_5 FOREIGN KEY ( MOTIVE_ID ) REFERENCES MOTIVES ( ID ) ON
DELETE CASCADE ;

ALTER TABLE PAINTERS ADD CONSTRAINT PAINTER_DECORATION_FK FOREIGN KEY ( DECORATION_ID ) REFERENCES DECORATIONS ( ID ) ON
DELETE CASCADE ;

ALTER TABLE PLACEMENTS ADD CONSTRAINT PLACEMENT_DECORATION_FK FOREIGN KEY ( DECORATION_ID ) REFERENCES DECORATIONS ( ID ) ON
DELETE CASCADE ;

ALTER TABLE SCANS ADD CONSTRAINT SCAN_BOOK_FK FOREIGN KEY ( BOOK_ID ) REFERENCES BOOKS ( ID ) ON
DELETE CASCADE ;

ALTER TABLE SCANS ADD CONSTRAINT SCAN_DECORATION_FK FOREIGN KEY ( DECORATION_ID ) REFERENCES DECORATIONS ( ID ) ON
DELETE CASCADE ;


-- Oracle SQL Developer Data Modeler Summary Report:
--
-- CREATE TABLE                            13
-- CREATE INDEX                             0
-- ALTER TABLE                             26
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
--
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
--
-- REDACTION POLICY                         0
-- TSDP POLICY                              0
--
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
--
-- ERRORS                                   0
-- WARNINGS                                 0
